"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e={fcp:2e3,lcp:2500,tti:3e3,cls:.1,fid:100,inp:200,ttfb:800,componentRenderTime:500};let t={firstContentfulPaint:null,timeToInteractive:null,largestContentfulPaint:null,cumulativeLayoutShift:0,firstInputDelay:null,interactionToNextPaint:null,timeToFirstByte:null,componentRenderTimes:[]};function n(){return new Promise((e=>{if("undefined"!=typeof window&&"PerformanceObserver"in window){const t=new PerformanceObserver((n=>{const o=n.getEntriesByName("first-contentful-paint")[0];if(o){const n=o.startTime.toFixed(2);e(n),t.disconnect()}}));t.observe({type:"paint",buffered:!0})}else e(null)}))}function o(){return new Promise((e=>{if("undefined"!=typeof window){if(window.addEventListener("load",(()=>{const t=performance.now().toFixed(2);e(t)})),"complete"===document.readyState){const t=performance.now().toFixed(2);e(t)}}else e(null)}))}function r(){return new Promise((e=>{if("undefined"!=typeof window&&"PerformanceObserver"in window){const t=new PerformanceObserver((n=>{const o=n.getEntries(),r=o[o.length-1].startTime.toFixed(2);e(r),t.disconnect()}));t.observe({type:"largest-contentful-paint",buffered:!0})}else e(null)}))}function i(){return new Promise((e=>{if("undefined"!=typeof window&&"PerformanceObserver"in window){let t=0;const n=new PerformanceObserver((o=>{o.getEntries().forEach((e=>{!e.hadRecentInput&&e.value&&(t+=e.value)}));const r=t.toFixed(4);e(r),n.disconnect()}));n.observe({type:"layout-shift",buffered:!0})}else e(null)}))}function s(){return new Promise((e=>{if("undefined"!=typeof window&&"PerformanceObserver"in window){const n=new PerformanceObserver((t=>{const o=t.getEntries()[0],r=(o.processingStart-o.startTime).toFixed(2);e(r),n.disconnect()}));n.observe({type:"first-input",buffered:!0}),setTimeout((()=>{null===t.firstInputDelay&&(console.warn("âš ï¸ No First Input Delay captured, using default."),e(null))}),5e3)}else e(null)}))}function a(){return new Promise((e=>{let t=!1;const n=o=>{const r=(performance.now()-o.timeStamp).toFixed(2);e(r),t=!0,window.removeEventListener("click",n)};window.addEventListener("click",n),setTimeout((()=>{t||(console.warn("âš ï¸ No interaction occurred or INP tracking is not supported."),e(null))}),5e3)}))}function c(){return new Promise((e=>{if("undefined"!=typeof window){e((performance.timing.responseStart-performance.timing.requestStart).toFixed(2))}else e(null)}))}function l(n={}){const{fcp:o,lcp:r,tti:i,cls:s,fid:a,inp:c,ttfb:l,componentRenderTime:u}=n||e;null!=t.firstContentfulPaint&&t.firstContentfulPaint>o&&console.warn(`âš ï¸ FCP of ${t.firstContentfulPaint} ms exceeded threshold of ${o} ms`),null!=t.largestContentfulPaint&&t.largestContentfulPaint>r&&console.warn(`âš ï¸ LCP of ${t.largestContentfulPaint} ms exceeded threshold of ${r} ms`),null!=t.timeToInteractive&&t.timeToInteractive>i&&console.warn(`âš ï¸ TTI of ${t.timeToInteractive} ms exceeded threshold of ${i} ms`),null!=t.cumulativeLayoutShift&&t.cumulativeLayoutShift>s&&console.warn(`âš ï¸ CLS of ${t.cumulativeLayoutShift} exceeded threshold of ${s}`),null!=t.firstInputDelay&&t.firstInputDelay>a&&console.warn(`âš ï¸ FID of ${t.firstInputDelay} ms exceeded threshold of ${a} ms`),null!=t.interactionToNextPaint&&t.interactionToNextPaint>c&&console.warn(`âš ï¸ INP of ${t.interactionToNextPaint} ms exceeded threshold of ${c} ms`),null!=t.timeToFirstByte&&t.timeToFirstByte>l&&console.warn(`âš ï¸ TTFB of ${t.timeToFirstByte} ms exceeded threshold of ${l} ms`),t.componentRenderTimes.forEach((({name:e,renderTime:t})=>{t>u&&console.warn(`âš ï¸ Component ${e} render time of ${t} ms exceeded threshold of ${u} ms`)}))}function u(){let n=100;return[(t.firstContentfulPaint-e.fcp)/100,(t.largestContentfulPaint-e.lcp)/100,(t.timeToInteractive-e.tti)/100,100*(t.cumulativeLayoutShift-e.cls),(t.firstInputDelay-e.fid)/100,(t.interactionToNextPaint-e.inp)/100,(t.timeToFirstByte-e.ttfb)/100].forEach((e=>{e>0&&(n-=e)})),t.componentRenderTimes.forEach((({renderTime:t})=>{const o=(t-e.componentRenderTime)/100;o>0&&(n-=o)})),Math.max(0,Math.round(n))}function f(e){const t=[{threshold:90,message:`ðŸ† Excellent! Your score is ${e}/100. Keep up the great work!`},{threshold:70,message:`ðŸ‘ Good job! Your score is ${e}/100. Some improvements needed.`},{threshold:0,message:`âš ï¸ Needs Improvement! Your score is ${e}/100. Optimize for better performance.`}].find((t=>e>=t.threshold));console.log(t?.message)}async function m(){const[e,l,u,f,m,d,p]=await Promise.all([n(),o(),r(),i(),s(),a(),c()]);return t={...t,firstContentfulPaint:e,timeToInteractive:l,largestContentfulPaint:u,cumulativeLayoutShift:f,firstInputDelay:m,interactionToNextPaint:d,timeToFirstByte:p},t}function d(){return"undefined"!=typeof window&&void 0!==window.localStorage}let p=d()&&JSON.parse(localStorage.getItem("trafficSources"))||{Direct:0,Google:0,Facebook:0,Others:0},w=d()&&parseInt(localStorage.getItem("pageViewCount"))||0,g=d()?new Set(JSON.parse(localStorage.getItem("uniqueVisitors"))||[]):new Set,h=d()&&JSON.parse(localStorage.getItem("routeViews"))||[];function S(){if(d()){const e=w+1;return localStorage.setItem("pageViewCount",e),e}return 0}function P(){if(d()){let e=localStorage.getItem("visitorId");return e||(e=`${Date.now()}-${Math.random().toString(36).substring(2,15)}`,localStorage.setItem("visitorId",e)),g.add(e),localStorage.setItem("uniqueVisitors",JSON.stringify([...g])),g.size}return 0}function T(e){if(d()){const t={route:e,timestamp:Date.now()};return h.find((t=>t.route===e))||(h.push(t),localStorage.setItem("routeViews",JSON.stringify(h))),h}return[]}function x(){if(d()){if(!sessionStorage.getItem("trackedTrafficSource")){const e=document.referrer.toLowerCase();e?e.includes("google")?p.Google++:e.includes("facebook")?p.Facebook++:p.Others++:p.Direct++,sessionStorage.setItem("trackedTrafficSource","true")}return localStorage.setItem("trafficSources",JSON.stringify(p)),p}return{Direct:0,Google:0,Facebook:0,Others:0}}exports.calculatePerformanceScore=u,exports.checkPerformanceAlerts=l,exports.getPageViews=function(){return d()&&parseInt(localStorage.getItem("pageViewCount"))||0},exports.getPerformanceMetrics=m,exports.getRouteViews=function(){return d()&&JSON.parse(localStorage.getItem("routeViews"))||[]},exports.getTrafficSources=function(){return d()?JSON.parse(localStorage.getItem("trafficSources"))||p:{Direct:0,Google:0,Facebook:0,Others:0}},exports.getUniqueVisitors=function(){return d()&&JSON.parse(localStorage.getItem("uniqueVisitors")).length||0},exports.runGamification=async function(){await m(),f(u())},exports.runPerformanceTracker=async function(n={}){const{trackMetrics:o=!0,showAlerts:r=!0,enableGamification:i=!0,thresholds:s={}}=n,a={...e,...s};if(o&&(await m(),console.log("ðŸ“Š Performance Metrics:",t)),r&&l(a),i){f(u())}},exports.trackAllActivities=function(){return{pageViews:S(),uniqueVisitors:P(),routeViews:T(window.location.pathname),trafficSources:x()}},exports.trackComponentRender=function(e,n){return t.componentRenderTimes.push({name:e,renderTime:n}),{name:e,renderTime:n.toFixed(2)}},exports.trackCumulativeLayoutShift=i,exports.trackFirstContentfulPaint=n,exports.trackFirstInputDelay=s,exports.trackInteractionToNextPaint=a,exports.trackLargestContentfulPaint=r,exports.trackTimeToFirstByte=c,exports.trackTimeToInteractive=o;
//# sourceMappingURL=sveltick.cjs.js.map
